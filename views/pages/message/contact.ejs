<% include ../../partials/head %>

<div style="margin: 20px auto; width:50%; border-color: #CCCCCC;" class="border p-3 rounded clearfix" >
<form>
    <div class="form-group row">
        <label for="colFormLabel" class="col-sm-2 col-form-label-lg">To</label>
        <div class="col-sm-10">
            <input type="email" class="form-control form-control-lg" id="usernameInput" placeholder="username / email address">
        </div>
        <div style="margin:0 748px">
            <button id="adminBtn" class="btn btn-secondary" type="button">Admin</button>
        </div>
    </div>
    <div class="form-group row">
        <label for="colFormLabel" class="col-sm-2 col-form-label-lg">Title</label>
        <div class="col-sm-10">
            <input type="email" class="form-control form-control-lg" id="titleInput" placeholder="please entre a title">
        </div>
    </div>
    <div class="form-group row">
        <label for="colFormLabelLg" class="col-sm-2 col-form-label col-form-label-lg">Body</label>
        <div class="col-sm-10">
            <textarea class="form-control" id="bodyInput" rows="8" placeholder="information"></textarea>
        </div>
    </div>
    <div class="float-right">
        <button id="sendBtn" class="btn btn-secondary" type="button">Send</button>
    </div>
</form>
</div>

<script>
    $().ready(() =>
    {
        $('#adminBtn').click(() =>
        {
            $('#usernameInput').val('Admin');
        })
        $('#sendBtn').click(() =>
        {
            let message = {
                usernameTo: $('#usernameInput').val(),
                header: $('#titleInput').val(),
                body: $('#bodyInput').val()
            }
            $.post('send', message, (response) =>
            {
                if (response.status == 'success')
                {
                    location.href = './inbox';
                } 
                else 
                {
                    alert("Failed to send message: \n" + response.reason);
                }
            })
        })
    })
</script>

<% include ../../partials/foot %>